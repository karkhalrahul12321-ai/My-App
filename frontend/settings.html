<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>SmartAPI Settings</title>

<link rel="stylesheet" href="style.css" />

<style>
  .settings-page {
    max-width: 420px;
    margin: auto;
    padding: 20px;
  }

  h2 {
    margin: 0;
    font-size: 24px;
  }

  .back-btn {
    margin-top: 15px;
    width: 100%;
    padding: 12px;
    background: transparent;
    border: 1px solid var(--accent);
    border-radius: 12px;
    color: var(--accent);
    font-size: 15px;
    cursor: pointer;
  }

  .save-btn {
    width: 100%;
    padding: 12px;
    background: var(--accent);
    border: none;
    border-radius: 12px;
    font-size: 16px;
    font-weight: bold;
    color: #000;
    margin-top: 15px;
  }

  input {
    margin-bottom: 14px;
  }

  .note {
    font-size: 13px;
    color: var(--subtext);
    margin-top: 10px;
    line-height: 1.5;
  }

</style>
</head>

<body data-theme="t1">

<div class="settings-page">

  <h2>SmartAPI Login</h2>
  <p style="color:var(--subtext);margin-bottom:15px;">
    Backend में API Key, UserID, TOTP पहले से सेट हैं।  
    यहाँ सिर्फ Trading Password सेव होगा।
  </p>

  <label>Trading Password (PIN)</label>
  <input id="pwd" type="password" placeholder="Enter password" />

  <label>
    <input id="saveBox" type="checkbox" style="width:auto;margin-right:6px;" />
    Save password on device
  </label>

  <button class="save-btn" onclick="saveSettings()">Save</button>

  <button class="back-btn" onclick="goBack()">Back to App</button>

  <div class="note">
    • पासवर्ड सिर्फ आपके मोबाइल/ब्राउज़र के localStorage में सेव होगा।  
    • API keys backend में सुरक्षित हैं।  
    • Live LTP के लिए login auto-use होगा।
  </div>

</div>

<script>
  // Load saved password
  window.onload = () => {
    const pw = localStorage.getItem("th_pw") || "";
    const save = localStorage.getItem("th_save_pw") === "1";

    document.getElementById("pwd").value = pw;
    document.getElementById("saveBox").checked = save;
  };

  function saveSettings() {
    const pwd = document.getElementById("pwd").value.trim();
    const save = document.getElementById("saveBox").checked;

    if (save) {
      localStorage.setItem("th_pw", pwd);
      localStorage.setItem("th_save_pw", "1");
    } else {
      localStorage.removeItem("th_pw");
      localStorage.removeItem("th_save_pw");
    }

    alert("Settings saved!");
  }

  function goBack() {
    window.location.href = "index.html";
  }
</script>

</body>
</html>
