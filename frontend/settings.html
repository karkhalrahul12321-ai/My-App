<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>App Settings</title>
  <link rel="stylesheet" href="style.css" />
</head>

<body>

  <div class="app-shell">

    <h1 style="font-size: 28px; margin-bottom: 18px;">
      ⚙ App Settings
    </h1>

    <!-- THEME SETTINGS -->
    <div class="settings-box">
      <div class="settings-row">
        <label class="settings-label">Theme</label>
        <select id="themeSelect" class="settings-input">
          <option value="light">Clean White</option>
          <option value="soft">Soft Grey</option>
          <option value="blue">Blue Pro</option>
          <option value="warm">Warm</option>
          <option value="dark">Dark</option>
        </select>
      </div>

      <div class="settings-row">
        <label class="settings-label">Accent Color</label>
        <select id="accentSelect" class="settings-input">
          <option value="blue">Blue</option>
          <option value="green">Green</option>
          <option value="teal">Teal</option>
          <option value="orange">Orange</option>
          <option value="purple">Purple</option>
        </select>
      </div>
    </div>

    <!-- PIN SETTINGS -->
    <div class="settings-box">
      <label class="settings-label">Trading Password (PIN)</label>
      <input id="pinInput" type="password" class="settings-input" placeholder="••••" />
    </div>

    <!-- SMARTAPI KEYS -->
    <div class="settings-box">
      <label class="settings-label">SmartAPI (Server Keys)</label>
      <p style="font-size: 14px; color: var(--text-soft); margin-bottom: 10px;">
        Saved locally in your device only
      </p>

      <p id="sApiKey">API Key: -</p>
      <p id="sUserId">User ID: -</p>
      <p id="sTotp">TOTP Secret: -</p>
    </div>

    <!-- SAVE BUTTON -->
    <button id="saveSettingsBtn" class="btn-primary" style="margin-top: 10px;">
      Save Settings
    </button>

    <!-- BACK BUTTON (FULLY FIXED) -->
    <button class="btn-ghost" style="width: 100%; margin-top: 14px;"
      onclick="window.location.href='./index.html'">
      ← Back to App
    </button>

  </div>

  <script>
    // Load saved settings
    function loadSettings() {
      const theme = localStorage.getItem("app_theme") || "soft";
      const accent = localStorage.getItem("app_accent") || "blue";
      const pin = localStorage.getItem("trade_pin") || "";
      const apiKey = localStorage.getItem("smart_api_key") || "-";
      const userId = localStorage.getItem("smart_user_id") || "-";
      const totp = localStorage.getItem("smart_totp") || "-";

      document.getElementById("themeSelect").value = theme;
      document.getElementById("accentSelect").value = accent;
      document.getElementById("pinInput").value = pin;

      document.getElementById("sApiKey").textContent = "API Key: " + apiKey;
      document.getElementById("sUserId").textContent = "User ID: " + userId;
      document.getElementById("sTotp").textContent = "TOTP Secret: " + totp;
    }

    // Save settings
    document.getElementById("saveSettingsBtn").onclick = () => {
      const theme = document.getElementById("themeSelect").value;
      const accent = document.getElementById("accentSelect").value;
      const pin = document.getElementById("pinInput").value;

      localStorage.setItem("app_theme", theme);
      localStorage.setItem("app_accent", accent);
      localStorage.setItem("trade_pin", pin);

      alert("Settings Saved!");
    };

    loadSettings();
  </script>
</body>
</html>
